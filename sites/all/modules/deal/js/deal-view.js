jQuery(document).ready(function(){var e=new ZeroClipboard(jQuery(".coupon-code"),{moviePath:"/sites/all/modules/deal/ZeroClipboard/ZeroClipboard.swf"});e.on("complete",function(e,t){window.open(jQuery(".coupon-code").attr("deal-url"),"_blank")});e.on("noFlash",function(e){jQuery(".coupon-code").click(function(){window.open(jQuery(this).attr("deal-url"),"_blank")});jQuery(".clicktocopy").hide()});jQuery(".vote-plus").click(function(){var e=this;jQuery.ajax({url:"/deal/vote",type:"POST",data:{id:jQuery(e).attr("oid"),type:"plus",object:jQuery(e).attr("object")},dataType:"json",success:function(t){switch(t.result){case"NO AUTHENTICATED":window.location.href=t.redirect;break;case"FAILURE":alert("Your vote was not processed.");break;case"SUCCESS":jQuery(e).text(t.state.plus+" +");jQuery(e).next().text(t.state.minus+" -");var n=".vote-content-"+jQuery(e).attr("object")+"-"+jQuery(e).attr("oid");var r=n+" .vote-state";jQuery(r+" .vote-result").text('You voted "+" for this'+" "+t.state.voted_state.date_posted);jQuery(r).fadeIn("fast");jQuery(r+" .vote-cancel").show();break;default:break}}})});jQuery(".vote-minus").click(function(){var e=this;jQuery.ajax({url:"/deal/vote",type:"POST",data:{id:jQuery(e).attr("oid"),type:"minus",object:jQuery(e).attr("object")},dataType:"json",success:function(t){switch(t.result){case"NO AUTHENTICATED":window.location.href=t.redirect;break;case"FAILURE":alert("Your vote was not processed.");break;case"SUCCESS":jQuery(e).text(t.state.minus+" -");jQuery(e).prev().text(t.state.plus+" +");var n=".vote-content-"+jQuery(e).attr("object")+"-"+jQuery(e).attr("oid");var r=n+" .vote-state";jQuery(r+" .vote-result").text('You voted "-" for this content'+" "+t.state.voted_state.date_posted);jQuery(r).fadeIn("fast");jQuery(r+" .vote-cancel").show();break;default:break}}})});jQuery(".vote-cancel").click(function(){var e=this;jQuery.ajax({url:"/deal/vote/cancel",type:"POST",data:{id:jQuery(e).attr("oid"),object:jQuery(e).attr("object")},dataType:"json",success:function(t){switch(t.result){case"NO AUTHENTICATED":window.location.href=t.redirect;break;case"FAILURE":alert("Your vote was not processed.");break;case"SUCCESS":var n=".vote-content-"+jQuery(e).attr("object")+"-"+jQuery(e).attr("oid");jQuery(n+" .vote-minus").text(t.state.minus+" -");jQuery(n+" .vote-plus").text(t.state.plus+" +");jQuery(n+" .vote-state .vote-result").text("You cancelled your vote");jQuery(n+" .vote-state").fadeIn("fast");jQuery(n+" .vote-state .vote-cancel").hide();break;default:break}}})})})