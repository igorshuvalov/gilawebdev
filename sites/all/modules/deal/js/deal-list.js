jQuery(document).ready(function(){jQuery(".vote-plus").click(function(){var e=this;jQuery.ajax({url:"/deal/vote",type:"POST",data:{id:jQuery(e).attr("did"),type:"plus",object:"deal"},dataType:"json",success:function(t){switch(t.result){case"NO AUTHENTICATED":window.location.href=t.redirect;break;case"FAILURE":alert("Your vote was not processed.");break;case"SUCCESS":jQuery(e).text("+ "+t.state.plus);jQuery(e).next().text("- "+t.state.minus);var n=".vote-content-"+jQuery(e).attr("did");jQuery(n+" .vote-state .vote-result").text('You voted "+" for this content'+" "+t.state.voted_state.date_posted);jQuery(n+" .vote-state").fadeIn("fast");jQuery(n+" .vote-state .vote-cancel").show();break;default:break}}})});jQuery(".vote-minus").click(function(){var e=this;jQuery.ajax({url:"/deal/vote",type:"POST",data:{id:jQuery(e).attr("did"),type:"minus",object:"deal"},dataType:"json",success:function(t){switch(t.result){case"NO AUTHENTICATED":window.location.href=t.redirect;break;case"FAILURE":alert("Your vote was not processed.");break;case"SUCCESS":jQuery(e).text("- "+t.state.minus);jQuery(e).prev().text("+ "+t.state.plus);var n=".vote-content-"+jQuery(e).attr("did");jQuery(n+" .vote-state .vote-result").text('You voted "-" for this content'+" "+t.state.voted_state.date_posted);jQuery(n+" .vote-state").fadeIn("fast");jQuery(n+" .vote-state .vote-cancel").show();break;default:break}}})});jQuery(".vote-cancel").click(function(){var e=this;jQuery.ajax({url:"/deal/vote/cancel",type:"POST",data:{id:jQuery(e).attr("did"),object:"deal"},dataType:"json",success:function(t){switch(t.result){case"NO AUTHENTICATED":window.location.href=t.redirect;break;case"FAILURE":alert("Your vote was not processed.");break;case"SUCCESS":var n=".vote-content-"+jQuery(e).attr("did");jQuery(n+" .vote-minus").text("- "+t.state.minus);jQuery(n+" .vote-plus").text("+ "+t.state.plus);jQuery(n+" .vote-state .vote-result").text("You cancelled your vote");jQuery(n+" .vote-state").fadeIn("fast");jQuery(n+" .vote-state .vote-cancel").hide();break;default:break}}})})})